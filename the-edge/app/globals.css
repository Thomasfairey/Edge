@import "tailwindcss";

:root {
  --background: #FAFAF8;
  --surface: #FFFFFF;
  --border: #E5E7EB;
  --border-accent: #C7D2FE;
  --text-primary: #1A1A2E;
  --text-secondary: #6B7280;
  --text-tertiary: #9CA3AF;
  --accent: #6366F1;
  --accent-violet: #8B5CF6;
  --accent-light: #EEF2FF;
  --success: #10B981;
  --warning: #F59E0B;
  --danger: #EF4444;
  --shadow-card: 0 1px 3px rgba(99,102,241,0.04), 0 1px 2px rgba(0,0,0,0.06);
  --shadow-elevated: 0 4px 20px rgba(99,102,241,0.08), 0 2px 8px rgba(0,0,0,0.06);
}

@theme inline {
  --color-background: var(--background);
  --color-surface: var(--surface);
  --color-border: var(--border);
  --color-border-accent: var(--border-accent);
  --color-primary: var(--text-primary);
  --color-secondary: var(--text-secondary);
  --color-tertiary: var(--text-tertiary);
  --color-accent: var(--accent);
  --color-accent-violet: var(--accent-violet);
  --color-accent-light: var(--accent-light);
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-danger: var(--danger);
}

body {
  background: var(--background);
  color: var(--text-primary);
}

/* ================================================================ */
/* Scrollbar                                                         */
/* ================================================================ */

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* ================================================================ */
/* Animations                                                        */
/* ================================================================ */

@keyframes pulse-dot {
  0%, 80%, 100% { opacity: 0.3; }
  40% { opacity: 1; }
}
.loading-dot:nth-child(1) { animation: pulse-dot 1.4s infinite 0s; }
.loading-dot:nth-child(2) { animation: pulse-dot 1.4s infinite 0.2s; }
.loading-dot:nth-child(3) { animation: pulse-dot 1.4s infinite 0.4s; }

@keyframes gate-progress {
  0% { width: 0%; }
  100% { width: 100%; }
}

/* Phase transitions */
.phase-enter { opacity: 0; transform: translateY(10px); }
.phase-active { opacity: 1; transform: translateY(0); transition: all 300ms ease-out; }
.phase-exit { opacity: 0; transition: opacity 200ms ease-in; }

/* Sparkle for session complete */
@keyframes sparkle {
  0% { opacity: 0; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.05); }
  100% { opacity: 1; transform: scale(1); }
}
.animate-sparkle { animation: sparkle 600ms ease-out forwards; }

/* Pulse for phase indicator */
@keyframes indicator-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(99,102,241,0.4); }
  50% { box-shadow: 0 0 0 4px rgba(99,102,241,0); }
}
.pulse-dot-indicator { animation: indicator-pulse 2s ease-in-out infinite; }

/* Card collapse */
@keyframes collapse {
  0% { max-height: 500px; opacity: 1; margin-bottom: 1.5rem; }
  100% { max-height: 0; opacity: 0; margin-bottom: 0; overflow: hidden; }
}
.animate-collapse { animation: collapse 300ms ease-in forwards; }

/* ================================================================ */
/* Mobile-first PWA styles                                          */
/* ================================================================ */

input, textarea, select { font-size: 16px !important; }
html { height: -webkit-fill-available; }
body { min-height: 100dvh; min-height: -webkit-fill-available; overscroll-behavior: none; }
* { -webkit-tap-highlight-color: transparent; }
.chat-container { -webkit-overflow-scrolling: touch; scroll-behavior: smooth; }
.bottom-bar { padding-bottom: env(safe-area-inset-bottom, 0px); }
button, [role="button"], .phase-indicator { -webkit-user-select: none; user-select: none; }
.session-page { overscroll-behavior-y: contain; }

/* Full viewport height */
.h-dvh { height: 100dvh; height: -webkit-fill-available; }

/* Safe area padding */
.pb-safe { padding-bottom: env(safe-area-inset-bottom, 0px); }

/* Focus ring */
:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

/* Selection */
::selection { background: rgba(99,102,241,0.2); color: var(--text-primary); }

/* Dark autofill override */
input:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 1000px var(--surface) inset;
  -webkit-text-fill-color: var(--text-primary);
}

/* Gradient button utility */
.btn-gradient {
  background: linear-gradient(135deg, var(--accent), var(--accent-violet));
  color: white;
  font-weight: 600;
  border-radius: 0.75rem;
  transition: all 150ms;
}
.btn-gradient:active { transform: scale(0.98); }
.btn-gradient:disabled { opacity: 0.4; }

/* Gradient line */
.gradient-line {
  height: 3px;
  background: linear-gradient(90deg, var(--accent), var(--accent-violet));
}

/* Card utility */
.card {
  background: var(--surface);
  border-radius: 1rem;
  box-shadow: var(--shadow-card);
  padding: 1.25rem;
}
.card:hover { box-shadow: var(--shadow-elevated); }

/* Thinner scrollbar on mobile */
@media (max-width: 768px) {
  ::-webkit-scrollbar { width: 3px; }
}
